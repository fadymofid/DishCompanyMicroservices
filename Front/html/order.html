<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Place Order</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container mt-5">
  <h2>Place Your Order</h2>
  <form id="orderForm">
    <div class="mb-3">
      <label for="dishName" class="form-label">Dish Name</label>
      <input type="text" class="form-control" id="dishName" required>
    </div>
    <div class="mb-3">
      <label for="quantity" class="form-label">Quantity</label>
      <input type="number" class="form-control" id="quantity" required>
    </div>
    <button type="submit" class="btn btn-primary">Submit Order</button>
  </form>
  <div id="orderMessage" class="mt-3"></div>

  <button id="backBtn" class="btn btn-light mt-3">Back</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const orderForm = document.getElementById('orderForm');
  const orderMessage = document.getElementById('orderMessage');

  orderForm.addEventListener('submit', async function(event) {
    event.preventDefault();

    const dishName = document.getElementById('dishName').value;
    const quantity = document.getElementById('quantity').value;

    try {
      const response = await fetch('http://localhost:8081/orders', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ dishName, quantity })
      });

      if (!response.ok) {
        throw new Error('Failed to place order');
      }

      orderMessage.textContent = 'Order placed successfully!';
      orderMessage.className = 'text-success';
    } catch (error) {
      orderMessage.textContent = error.message;
      orderMessage.className = 'text-danger';
    }
  });

  const backBtn = document.getElementById('backBtn');
  backBtn.addEventListener('click', function() {
    window.history.back();
  });
</script>
</body>
</html>